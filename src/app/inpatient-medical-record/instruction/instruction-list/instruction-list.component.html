<div style="flex: 1">
  <div style="display: flex; margin: 1rem 0">
    <div
      style="
        display: flex;
        flex: 0 0 45%;
        align-items: center;
        justify-content: space-between;
      "
    >
      <input
        type="text"
        class="form-control form__input"
        style="flex: 0 0 45%"
      />
      <div class="fab __raised" title="Search">
        <i class="fas fa-arrow-right"></i>
      </div>
      <div class="fab __raised" title="Show all">
        <i class="fas fa-list"></i>
      </div>
      <div class="fab __raised" title="Clear">
        <i class="fas fa-times"></i>
      </div>
      <div
        class="fab __raised"
        title="Advanced Search"
        (click)="openAdvSearch()"
      >
        <i class="fas fa-search"></i>
      </div>
      <div class="fab __raised" title="Export">
        <i class="fas fa-file-export"></i>
      </div>
    </div>
  </div>

  <div *ngIf="true">
    <div style="display: flex; margin-top: 1rem; margin-bottom: 1rem">
      <button class="btn btn-primary btn__crud" (click)="addFilter()">
        Add filter
      </button>
      <button class="btn btn-success btn__crud" (click)="advanceSearch()">
        Search
      </button>
      <button class="btn btn-secondary btn__crud" (click)="clearFilter()">
        Clear all filter
      </button>
    </div>

    <div *ngFor="let filter of filters" style="display: flex; margin: 1rem 0">
      <div
        style="
          display: flex;
          flex: 0 0 50%;
          align-items: center;
          justify-content: space-between;
        "
      >
        <i class="fas fa-times"></i>
        <select
          [(ngModel)]="filter.field"
          class="form-control form__input"
          style="flex: 0 0 30%"
        >
          <option *ngFor="let field of filter.fields" [value]="field.value">
            {{ field.text }}
          </option>
        </select>
        <select
          [(ngModel)]="filter.condition"
          class="form-control form__input"
          style="flex: 0 0 30%"
        >
          <option
            *ngFor="let condition of filter.conditions"
            [value]="condition.value"
          >
            {{ condition.text }}
          </option>
        </select>
        <input
          [(ngModel)]="filter.search"
          type="text"
          class="form-control form__input"
          style="flex: 0 0 35%"
        />
      </div>
    </div>
  </div>

  <div style="display: flex; margin: 0.5rem 0">
    <app-pagination
      [total]="(instructionStoreService.instructions$ | async)?.length"
      [perPage]="perPage"
      [start]="start"
      [end]="end"
      [perPages]="perPages"
      style="flex: 0 0 25%"
      (onPerPageChanged)="handlePerPageChanged($event)"
      (onNext)="handleSkip(1)"
      (onPrev)="handleSkip(2)"
      (onSkipFirst)="handleSkip(3)"
      (onSkipLast)="handleSkip(4)"
    ></app-pagination>
  </div>

  <app-table [headers]="headers">
    <tr
      class="__raised"
      *ngFor="
        let instruction of (
          instructionStoreService.instructions$ | async
        ).slice(start, end)
      "
      (click)="goToList(instruction)"
    >
      <td>
        {{ formatDate(instruction.date, "DD/MM/yyyy") }}
      </td>
      <td>{{ formatDate(instruction.dateTaken, "DD/MM/yyyy") }}</td>
      <td>{{ instruction.drugAllergyTo }}</td>
      <td>{{ instruction.instruction }}</td>
      <td>{{ instruction.remarks }}</td>
    </tr>
  </app-table>
</div>
